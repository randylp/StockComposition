---
title: Appendix E - Figures of Chinook Model-Generated Stock Composition of Landed
  Catch for AABM and ISBM Fisheries, 1979-YYYY
output: word_document
header-includes:
- \usepackage{pdflscape}
- \newcommand{\blandscape}{\begin{landscape}}
- \newcommand{\elandscape}{\end{landscape}}
---

```{r setup, include=FALSE}
#prelims
 #required packages
  library(knitr)
  library(rprojroot)
  library(RColorBrewer)
  library(ggplot2)
  library(gridExtra)
 #knitr options
  knitr::opts_chunk$set(echo = TRUE) 
  knitr::opts_knit$set(root.dir = rprojroot::find_rstudio_root_file())
  knitr::opts_chunk$set(cache=FALSE) #cache to speed up
```

```{r data_and_calcs, echo=FALSE, warnings=FALSE}
#load functions
 source("Code/StackedAreaFunLibrary.R")
#load data
 #auxiliary data
  auxcat     = read.delim("Data\\clb1804\\CLB1804auxCatch.txt",header=TRUE)
  seakaddon  = read.delim("Data\\clb1804\\CLB1804SEAKaddon.txt",header=TRUE)
 #data from CLB directory
  fisherymap = read.delim("Data\\clb1804\\9806fisherymap.txt",header=TRUE)
  stockmap   = read.delim("Data\\clb1804\\9806stockmap.txt",header=TRUE)
  aabmcat    = read.csv("Data\\clb1804\\1804P_fish_AABM_CCC.csv", header=TRUE)
  isbmcat    = read.csv("Data\\clb1804\\1804P_fish_ISBM_CCC.csv", header=TRUE)
  obscat     = read.csv("Data\\clb1804\\obsCatch.csv", header=TRUE)
#calculations
 #w/o seak addon
 stockcomp = StockCompData(stockmap = stockmap, fisherymap = fisherymap, auxcat = auxcat, obscat = obscat, aabmcat = aabmcat, isbmcat = isbmcat, write_output = NULL)
#w/ seak addon
 stockcomp_seakaddon = StockCompData(stockmap = stockmap, fisherymap = fisherymap, auxcat = auxcat, obscat = obscat, aabmcat = aabmcat, isbmcat = isbmcat, write_output = NULL, seakaddon = seakaddon)
 
#the all important mystock list
 mystocks = c("ORCST","CR-tule","CR-sp&su","CR-bright","WACST","PSD","FR-late","FR-early","GS","WCVI","NCBC","SEAK")
```

Stock composition in the AABM and ISBM fisheries is estimated using the Chinook Model. The proportion of landed catch by model stock is computed:  
$$ P_{F,S,Y} = \frac{Q_{F,S,Y}}{\sum_S{Q_{F,S,Y}}} $$
where $Q_{F,S,Y}$ is model landed catch by fishery $F$, stock $S$, and year $Y$. Landed catch stock composition is computed:
$$ C_{F,S,Y} = C_{F,Y}*P_{F,S,Y} $$
where $C_{F,Y}$ is reported landed catch by fishery $F$ and year $Y$. Since the Chinook Model does not include the Alaska Hatchery Addon, reported landed catch stock composition is adjusted:
$$ C_{F,S=AK,Y} =  C_{F,S=AK,Y} + A_{F,S=AK,Y} $$
where $A_{F,S=AK,Y}$ is the Alaska Hatchery Addon by fishery $F$ and year $Y$ for only the Alaska Stock Group. Results with and without the Alaska Hatchery Addon adjustment are reported. Stock abbreviations in each figure correspond to the following model stocks and aggregations: 

| Stock Group | Description                                                                                                                                                             |
|-------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| ORCST       | Oregon Coast                                                                                                                                                            |
| CR-tule     | Columbia River-Fall Tule stocks (Spring Creek, Lower River Hatchery, and Cowlitz Fall)                                                                                  |
| CR-sp&su    | Columbia River Spring and Summer stocks (Willamette, Cowlitz Spring, Columbia Summers)                                                                                  |
| CR-bright   | Columbia River Fall Bright stocks (Upriver, Mid-Columbia, Lewis River Wild, Lyons Ferry)                                                                                |
| WACST       | Washington Coast                                                                                                                                                        |
| PSD         | Puget Sound stocks (Nooksack Fall and Spring, Natural Fall Fingerlings, Hatchery Fall Fingerlings, Hatchery Yearlings, Skagit Wild, Stillaguamish Wild, Snohomish Wild) |
| FR-late     | Fraser River Late stock                                                                                                                                                 |
| FR-early    | Fraser River Early stocks                                                                                                                                               |
| GS          | Georgia Strait stocks (Upper, Lower Natural, Lower Hatchery)                                                                                                            |
| WCVI        | West Coast Vancouver Island Stocks (hatchery and natural)                                                                                                               |
| NCBC        | North Central British Columbia stocks                                                                                                                                   |
| SEAK        | Southeast Alaska stocks                                                                                                                                                 |

## Appendix E1-Chinook Model Estimates of landed catch stock composition for Alaska troll with (upper) and without (lower) Alaska hatchery add-on and terminal exclusion, 1979-2016.

```{r echo=FALSE, fig.height=6.5, fig.width=8.5}
#create figure
 StackedAreaFigure(stockcomp_seakaddon, fishnum = 1, caps_on = FALSE, labs_title="Alaska Troll")
 StackedAreaFigure(stockcomp, fishnum = 1, caps_on = FALSE, labs_title="Alaska Troll")
```

\blandscape

## Appendix E2-Chinook Model Estimates of landed catch stock composition for North British Columbia troll, 1979-2016.

```{r echo=FALSE, fig.height=6.5, fig.width=8.5}
#create figure
 StackedAreaFigure(stockcomp_seakaddon, fishnum = 2, caps_on = FALSE, labs_title="North BC Troll")
```

\newpage

## Appendix E3-Chinook Model Estimates of landed catch stock composition for Central British Columbia troll, 1979-2016.

```{r echo=FALSE, fig.height=6.5, fig.width=8.5}
#create figure
 StackedAreaFigure(stockcomp_seakaddon, fishnum = 3, caps_on = FALSE, labs_title="Central BC Troll")
```

\newpage

## Appendix E4-Chinook Model Estimates of landed catch stock composition for West Coast Vancouver Island troll, 1979-2016

```{r echo=FALSE, fig.height=6.5, fig.width=8.5}
#create figure
 StackedAreaFigure(stockcomp_seakaddon, fishnum = 4, caps_on = FALSE, labs_title="West Coast Vancouver Island Troll")
```

\newpage

## Appendix E5-Chinook Model Estimates of landed catch stock composition for Washington and Oregon troll, 1979-2016

```{r echo=FALSE, fig.height=6.5, fig.width=8.5}
#create figure
 StackedAreaFigure(stockcomp_seakaddon, fishnum = 5, caps_on = FALSE, labs_title="Washington & Oregon Troll")
```

\newpage

## Appendix E6-Chinook Model Estimates of landed catch stock composition for Strait of Georgia troll, 1979-2016.

```{r echo=FALSE, fig.height=6.5, fig.width=8.5}
#create figure
 StackedAreaFigure(stockcomp_seakaddon, fishnum = 6, caps_on = FALSE, labs_title="Georgia Strai Troll")
```

\elandscape

## Appendix E7-Chinook Model Estimates of landed catch stock composition for Alaska net with (upper) and without (lower) hatchery add-on and terminal exclusion, 1979-2016.

```{r echo=FALSE, fig.height=6.5, fig.width=8.5}
#create figure
 StackedAreaFigure(stockcomp_seakaddon, fishnum = 7, caps_on = FALSE, labs_title="Alaska Net")
 StackedAreaFigure(stockcomp, fishnum = 7, caps_on = FALSE, labs_title="Alaska Net")
```

\blandscape

## Appendix E8-Chinook Model Estimates of landed catch stock composition for North British Columbia net, 1979-2016.

```{r echo=FALSE, fig.height=6.5, fig.width=8.5}
#create figure
 StackedAreaFigure(stockcomp_seakaddon, fishnum = 8, caps_on = FALSE, labs_title="North BC Net")
```

\newpage

## Appendix E9-Chinook Model Estimates of landed catch stock composition for Central British Columbia net, 1979-2016

```{r echo=FALSE, fig.height=6.5, fig.width=8.5}
#create figure
 StackedAreaFigure(stockcomp_seakaddon, fishnum = 9, caps_on = FALSE, labs_title="Central BC Net")
```

\newpage

## Appendix E10-Chinook Model Estimates of landed catch stock composition for West Coast Vancouver Island net, 1979-2016

```{r echo=FALSE, fig.height=6.5, fig.width=8.5}
#create figure
 StackedAreaFigure(stockcomp_seakaddon, fishnum = 10, caps_on = FALSE, labs_title="West Coast Vancouver Island Net")
```

\newpage

## Appendix E11-Chinook Model Estimates of landed catch stock composition for Strait of Juan de Fuca net, 1979-2016.

```{r echo=FALSE, fig.height=6.5, fig.width=8.5}
#create figure
 StackedAreaFigure(stockcomp_seakaddon, fishnum = 11, caps_on = FALSE, labs_title="Juan de Fuca Net")
```

\newpage

## Appendix E12-Chinook Model Estimates of landed catch stock composition for North Puget Sound net, 1979-2016

```{r echo=FALSE, fig.height=6.5, fig.width=8.5}
#create figure
 StackedAreaFigure(stockcomp_seakaddon, fishnum = 12, caps_on = FALSE, labs_title="Puget Sound North Net")
```

\newpage

## Appendix E13-Chinook Model Estimates of landed catch stock composition for South Puget Sound net, 1979-2016.

```{r echo=FALSE, fig.height=6.5, fig.width=8.5}
#create figure
 StackedAreaFigure(stockcomp_seakaddon, fishnum = 13, caps_on = FALSE, labs_title="Puget Sound South Net")
```

\newpage

## Appendix E14-Chinook Model Estimates of landed catch stock composition for Washington Coast net, 1979-2016.

```{r echo=FALSE, fig.height=6.5, fig.width=8.5}
#create figure
 StackedAreaFigure(stockcomp_seakaddon, fishnum = 14, caps_on = FALSE, labs_title="Washington Coast Net")
```

\newpage

## Appendix E15-Chinook Model Estimates of landed catch stock composition for Columbia River net, 1979-2016.

```{r echo=FALSE, fig.height=6.5, fig.width=8.5}
#create figure
 StackedAreaFigure(stockcomp_seakaddon, fishnum = 15, caps_on = FALSE, labs_title="Columbia River Net")
```

\newpage

## Appendix E16-Chinook Model Estimates of landed catch stock composition for Johnstone Strait net, 1979-2016.

```{r echo=FALSE, fig.height=6.5, fig.width=8.5}
#create figure
 StackedAreaFigure(stockcomp_seakaddon, fishnum = 16, caps_on = FALSE, labs_title="Johnstone Strait Net")
```

\newpage

## Appendix E17-Chinook Model Estimates of landed catch stock composition for Fraser River net, 1979-2016.

```{r echo=FALSE, fig.height=6.5, fig.width=8.5}
#create figure
 StackedAreaFigure(stockcomp_seakaddon, fishnum = 17, caps_on = FALSE, labs_title="Fraser Net")
```

\elandscape

## Appendix E18-Chinook Model Estimates of landed catch stock composition for Alaska sport with (upper) and without (lower) Alaska hatchery add-on and terminal exclusion, 1979-2016.

```{r echo=FALSE, fig.height=6.5, fig.width=8.5}
#create figure
 StackedAreaFigure(stockcomp_seakaddon, fishnum = 18, caps_on = FALSE, labs_title="Alaska Sport")
 StackedAreaFigure(stockcomp, fishnum = 18, caps_on = FALSE, labs_title="Alaska Sport")
```

\blandscape

## Appendix E19-Chinook Model Estimates of landed catch stock composition for North and Central British Columbia sport, 1979-2016.

```{r echo=FALSE, fig.height=6.5, fig.width=8.5}
#create figure
 StackedAreaFigure(stockcomp_seakaddon, fishnum = 19, caps_on = FALSE, labs_title="North & Central BC Sport")
```

\newpage

## Appendix E20-Chinook Model Estimates of landed catch stock composition for West Coast Vancouver Island sport, 1979-2016.

```{r echo=FALSE, fig.height=6.5, fig.width=8.5}
#create figure
 StackedAreaFigure(stockcomp_seakaddon, fishnum = 20, caps_on = FALSE, labs_title="West Coast Vancouver Island Sport")
```

\newpage

## Appendix E21-Chinook Model Estimates of landed catch stock composition for Washington Ocean sport, 1979-2016.

```{r echo=FALSE, fig.height=6.5, fig.width=8.5}
#create figure
 StackedAreaFigure(stockcomp_seakaddon, fishnum = 21, caps_on = FALSE, labs_title="Washington Ocean Sport")
```

\newpage

## Appendix E22-Chinook Model Estimates of landed catch stock composition for North Puget Sound sport, 1979-2016.

```{r echo=FALSE, fig.height=6.5, fig.width=8.5}
#create figure
 StackedAreaFigure(stockcomp_seakaddon, fishnum = 22, caps_on = FALSE, labs_title="Puget Sound North Sport")
```

\newpage

## Appendix E23-Chinook Model Estimates of landed catch stock composition for South Puget Sound sport, 1979-2016.

```{r echo=FALSE, fig.height=6.5, fig.width=8.5}
#create figure
 StackedAreaFigure(stockcomp_seakaddon, fishnum = 23, caps_on = FALSE, labs_title="Puget Sound South Sport")
```

\newpage

## Appendix E24-Chinook Model Estimates of landed catch stock composition for Strait of Georgia sport, 1979-2016.

```{r echo=FALSE, fig.height=6.5, fig.width=8.5}
#create figure
 StackedAreaFigure(stockcomp_seakaddon, fishnum = 24, caps_on = FALSE, labs_title="Georgia Strait Sport")
```

\newpage

## Appendix E25-Chinook Model Estimates of landed catch stock composition for Terminal sport, 1979-2016.

```{r echo=FALSE, fig.height=6.5, fig.width=8.5}
#create figure
 StackedAreaFigure(stockcomp_seakaddon, fishnum = 25, caps_on = FALSE, labs_title="Terminal Sport")
```

\elandscape


